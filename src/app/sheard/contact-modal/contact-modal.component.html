<div class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-xl max-w-3xl w-full relative overflow-y-auto max-h-screen">
    <!-- زر الإغلاق -->
    <button
      (click)="closeModal()"
      class="absolute  p-2 rounded-full top-2 right-6 text-fontSecondary hover:text-black text-2xl font-bold"
    >
      &times;
    </button>

    <div class="text-center mb-8">
         <h2 class="text-3xl font-bold mb-2 text-fontPrimary">
                Get in Touch
              </h2>
              <p class="text-fontSecondary">
                Fill out the form below and we'll get back to you
              </p>
    </div>

    <!-- الفورم -->
    <form [formGroup]="contactForm" class="space-y-4 lg:space-y-3">
      <!-- Full Name -->
      <div class="flex gap-3">
        <div class="w-1/2">
          <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">
            First Name *
          </label>
          <input
            id="firstName"
            type="text"
            formControlName="firstName"
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors text-gray-700 placeholder-gray-400"
            [class.border-red-500]="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched"
            placeholder="Enter your first name"
          />
          <div *ngIf="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched" class="mt-1 text-sm text-error">
            <span *ngIf="contactForm.get('firstName')?.errors?.['required']">First name is required</span>
            <span *ngIf="contactForm.get('firstName')?.errors?.['minlength']">First name must be at least 2 characters</span>
          </div>
        </div>

        <div class="w-1/2">
          <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">
            Last Name *
          </label>
          <input
            id="lastName"
            type="text"
            formControlName="lastName"
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors text-gray-700 placeholder-gray-400"
            [class.border-red-500]="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched"
            placeholder="Enter your last name"
          />
          <div *ngIf="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched" class="mt-1 text-sm text-error">
            <span *ngIf="contactForm.get('lastName')?.errors?.['required']">Last name is required</span>
            <span *ngIf="contactForm.get('lastName')?.errors?.['minlength']">Last name must be at least 2 characters</span>
          </div>
        </div>
      </div>

      <!-- Phone Number -->
      <div>
        <label for="phoneNumber" class="block text-sm font-medium text-gray-700 mb-2">
          Phone Number *
        </label>
        <input
          id="phoneNumber"
          type="tel"
          formControlName="phoneNumber"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors text-gray-700 placeholder-gray-400"
          [class.border-red-500]="contactForm.get('phoneNumber')?.invalid && contactForm.get('phoneNumber')?.touched"
          placeholder="Enter your phone number"
        />
        <div *ngIf="contactForm.get('phoneNumber')?.invalid && contactForm.get('phoneNumber')?.touched" class="mt-1 text-sm text-error">
          <span *ngIf="contactForm.get('phoneNumber')?.errors?.['required']">Phone number is required</span>
          <span *ngIf="contactForm.get('phoneNumber')?.errors?.['pattern']">Please enter a valid phone number</span>
        </div>
      </div>

      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
          Email *
        </label>
        <input
          id="email"
          type="email"
          formControlName="email"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors text-gray-700 placeholder-gray-400"
          [class.border-red-500]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
          placeholder="Enter your email address"
        />
        <div *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="mt-1 text-sm text-error">
          <span *ngIf="contactForm.get('email')?.errors?.['required']">Email is required</span>
          <span *ngIf="contactForm.get('email')?.errors?.['email']">Please enter a valid email address</span>
        </div>
      </div>

      <!-- Country -->
      <div>
        <label for="country" class="block text-sm font-medium text-gray-700 mb-2">
          Country
        </label>
        <input
          id="country"
          type="text"
          formControlName="country"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors text-gray-700 placeholder-gray-400"
          [class.border-red-500]="contactForm.get('country')?.invalid && contactForm.get('country')?.touched"
          placeholder="Enter your country"
        />
        <div *ngIf="contactForm.get('country')?.invalid && contactForm.get('country')?.touched" class="mt-1 text-sm text-error">
          <span *ngIf="contactForm.get('country')?.errors?.['required']">Country is required</span>
          <span *ngIf="contactForm.get('country')?.errors?.['minlength']">Country must be at least 2 characters</span>
        </div>
      </div>

      <!-- Property -->
      <div>
        <label for="property" class="block text-sm font-medium text-gray-700 mb-2">
          What type of property are you looking for?
        </label>
        <select
          id="property"
          formControlName="property"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors text-gray-700 placeholder-gray-400"
          [class.border-red-500]="contactForm.get('property')?.invalid && contactForm.get('property')?.touched"
        >
          <option value="">What type of property are you looking for?</option>
          <option *ngFor="let property of mockProperties" [value]="property.name">
            {{ property.name }}
          </option>
        </select>
        <div *ngIf="contactForm.get('property')?.invalid && contactForm.get('property')?.touched" class="mt-1 text-sm text-error">
          <span *ngIf="contactForm.get('property')?.errors?.['required']">Please select a property</span>
        </div>
      </div>

      <!-- Submit Button -->
      <button
        type="button"
        (click)="onSubmit()"
        [disabled]="contactForm.invalid || isLoading"
        class="w-full bg-[#AF8255] text-white px-6 py-2 disabled:text-gray-300 disabled:bg-gray-200 disabled:cursor-not-allowed disabled:border-[#FFFFFF] font-semibold transition-all duration-200 flex items-center justify-center hover:bg-white hover:text-[#AF8255] border border-[#AF8255]"
      >
        <div *ngIf="isLoading" class="flex items-center">
          <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          Submitting...
        </div>
        <span *ngIf="!isLoading">Submit Form</span>
      </button>
    </form>
  </div>
</div>
